# 深入理解 Electron

Electron 框架将传统网页开发与桌面应用程序开发相结合，主进程控制应用程序的生命周期和主要功能，渲染进程负责用户界面的交互，预加载脚本用于解决安全和通信问题，而 HTML 文件则定义了应用程序的前端界面。理解这些概念是开发 Electron 应用程序的关键

## 主进程（Main Process）

- 主进程是 Electron 应用程序的核心，从 package.json 文件中的"main"脚本开始
- 可以直接访问 Node.js 标准库和操作系统的本地功能，具有完全的系统访问权限，可以与操作系统和原生 GUI 交互
- 负责应用程序的生命周期管理、创建窗口以及运行主要的应用程序逻辑
- 可以创建多个渲染进程，每个渲染进程对应一个窗口或 web 页面，通过创建`BrowserWindow`实例来生成应用窗口

## 渲染进程（Renderer Process）

- 负责运行用户界面的 JavaScript，每个 Electron 窗口都在其自己的渲染进程中运行
- 默认情况下，渲染进程无法使用 Node.js 或 Electron API，以确保安全性
- 渲染进程类似于传统网页开发中的浏览器标签页，处理用户界面交互
- 通过使用预加载脚本，渲染进程可以在全局作用域中使用 Node.js 或 Electron API

## 预加载脚本（Preload Script）

- 预加载脚本是在渲染进程加载页面之前运行的脚本
- 允许在渲染进程的全局作用域中安全地使用 Node.js 或 Electron API
- 可以在预加载脚本中将函数或数据添加到 window 对象，以供页面脚本使用
- 帮助解决渲染进程与主进程之间的安全和通信问题

## 进程之间的通信

### 主进程与渲染进程的关系

- 主进程通过创建`BrowserWindow`实例来生成应用窗口，每个窗口都对应一个渲染进程。
- 渲染进程是相互隔离的，一个渲染进程崩溃不会影响其他渲染进程的稳定性。
- 主进程负责管理所有页面和渲染进程，包括窗口的创建、关闭以及页面间的通信。
- 渲染进程之间和渲染进程与主进程之间的通信通过 IPC（进程间通信）实现，允许它们相互交流数据和请求执行操作。

总的来说，主进程是 Electron 应用程序的大脑，控制应用的整体流程和系统级操作，而渲染进程负责呈现和交互用户界面。它们之间通过 IPC 通信来协同工作，使得 Electron 应用程序能够结合 Web 技术和原生功能，提供强大的桌面应用程序体验。理解主进程与渲染进程之间的关系是构建 Electron 应用程序的关键，有助于实现复杂的应用逻辑和用户界面交互。
