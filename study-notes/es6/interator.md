# Iterator（遍历器）

遍历器（Iterator）就是这样一种机制。它是一种接口，为各种不同的数据结构提供统一的访问机制。任何数据结构只要部署 Iterator 接口，就可以完成遍历操作（即依次处理该数据结构的所有成员）。

## 作用

1. 为各种数据结构，提供一个统一的、简便的访问接口
2. 使得数据结构的成员能够按某种次序排列
3. ES6 创造了一种新的遍历命令 for...of 循环，Iterator 接口主要供 for...of 消费

## 遍历过程

（1）创建一个指针对象，指向当前数据结构的起始位置。遍历器对象本质上是指针对象。

（2）第一次调用指针对象的 next 方法，可以将指针指向数据结构的第一个成员。

（3）第二次调用指针对象的 next 方法，指针就指向数据结构的第二个成员。

（4）不断调用指针对象的 next 方法，直到它指向数据结构的结束位置。

next 方法返回一个对象，表示当前数据成员的信息。
这个对象具有 value 和 done 两个属性，value 属性返回当前位置的成员，done 属性是一个布尔值，表示遍历是否结束，即是否还有必要再一次调用 next 方法

## makeIterator 函数

遍历器生成函数，作用是返回一个遍历器对象

## idMaker 函数

遍历器生成函数，返回一个遍历器对象（即指针对象），没有对应的数据结构

## 默认 Iterator 接口

为所有数据结构，提供了一种统一的访问机制，即 for...of 循环
当使用 for...of 循环遍历某种数据结构时，该循环会自动去寻找 Iterator 接口
一种数据结构只要部署了 Iterator 接口，就称这种数据结构是“可遍历的”（iterable）

默认的 Iterator 接口部署在数据结构的 Symbol.iterator 属性
一个数据结构只要具有 Symbol.iterator 属性，就可以认为是“可遍历的”（iterable）
Symbol.iterator 属性本身是一个函数，就是当前数据结构默认的遍历器生成函数
执行这个函数，就会返回一个遍历器
至于属性名 Symbol.iterator，它是一个表达式，返回 Symbol 对象的 iterator 属性，这是一个预定义好的、类型为 Symbol 的特殊值，所以要放在方括号内。

有些数据结构原生具备 Iterator 接口（比如数组），即不用任何处理，就可以被 for...of 循环遍历。
原因在于，这些数据结构原生部署了 Symbol.iterator 属性，另外一些数据结构没有（比如对象）。
凡是部署了 Symbol.iterator 属性的数据结构，就称为部署了遍历器接口。调用这个接口，就会返回一个遍历器对象。

原生具备 Iterator 接口的数据结构如下。

Array
Map
Set
String
TypedArray
函数的 arguments 对象
NodeList 对象
